<!doctype html>
<html class="no-js no-svg" lang="en">
<head>
  <meta charset="utf-8">
  <title>
  Fly-out Menus
       &bull; Menus
  &bull; WAI Web Accessibility Tutorials
  </title>
  <link rel="canonical" href="https://www.w3.org/WAI/tutorials/menus/flyout/" />
  <meta name="viewport" content="width=device-width">
  <link href="../../stylesheets/wai-act-fe16f41e.css" rel="stylesheet" />
  <script src="../../javascripts/modernizr-a1c597b5.js"></script>
  <link rel="mask-icon" href="../../img/w3cwai-maskicon-cf2cdf03.svg" color="#003366">
</head>
<body class="texts">
  <header role="banner">
    <div class="w3c-wai-header">
      <a href="http://w3.org/"><img alt="W3C" width="90" src="../../img/w3c-bde9a11f.svg" /></a>
      <a href="http://w3.org/WAI/" class="wai"><img alt="Web Accessibility Initiative" src="../../img/wai-590850fc.svg" /></a>
    </div>
    <div class="page-title">
      <a href="../../" class="">Web Accessibility Tutorials <span class="subheading">Guidance on how to create websites that meet WCAG</span></a>
    </div>
  </header>
  <div class="with-side-menu">
    <nav aria-label="Skip links" role="navigation">
      <a href="#nav" class="btn btn-jump">Jump to the navigation</a>
    </nav>

<main role="main" class="content ">
  <article role="article">
    <header class="tutorial-heading">
      <nav class="breadcrumb" aria-label="Breadcrumbs" role="navigation">
        <p>
          <span class="home"><a href="../../" class=""><span class="count"></span><span class="txt">Tutorials home</span></a></span> <span class="icon icon-chevron-right"></span><span class="visuallyhidden">»</span>
          <span class="other">
              <a href="../" class=""><span class="count"></span><span class="txt">Menus</span></a> <span class="icon icon-chevron-right"></span><span class="visuallyhidden">»</span>
            <span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Fly-out Menus</span></span>
          </span>
        </p>
      </nav>
      <h1>
        Fly-out Menus
      </h1>
    </header>



    <div class="inner">




      <p>Use fly-out (or drop-down) menus to provide an overview of a web site’s page hierarchy. It removes the need for multiple page loads provided that users know where to find the information. Application menus are usually implemented this way, too.</p>

<p>People with reduced dexterity, such as tremors, often have trouble operating fly-out menus. For some, it might be impossible. Make sure to provide other ways to the submenu items, for example by repeating them on the page of the parent menu item.</p>

<h2 id="indicate-submenus">Indicate submenus</h2>

<p>Indicate menu items with submenus visually and using markup. In the following example, the submenu is indicated visually by an icon and this WAI-ARIA markup:</p>

<ul>
  <li><code>aria-haspopup="true"</code> declares that a menu item has a submenu.</li>
  <li><code>aria-expanded="false"</code> declares that the submenu is hidden.</li>
</ul>

<figure class="code ">
  <figcaption>Code snippet: HTML</figcaption>

<div class="highlight"><pre class="highlight html"><code><span class="nt">&lt;nav</span> <span class="na">aria-label=</span><span class="s">"Main Navigation"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;ul&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Shop<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"has-submenu"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"…"</span> <span class="na">aria-haspopup=</span><span class="s">"true"</span> <span class="na">aria-expanded=</span><span class="s">"false"</span><span class="nt">&gt;</span>
							Space Bears
						<span class="nt">&lt;/a&gt;</span>
						<span class="nt">&lt;ul&gt;</span>
								<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Space Bear 6<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
								<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Space Bear 6 Plus<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
						<span class="nt">&lt;/ul&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Mars Cars<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"…"</span><span class="nt">&gt;</span>Contact<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
		<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</code></pre></div>
</figure>

<h2 id="fly-out-functionality">Fly-out functionality</h2>

<p>The fly-out functionality is created using CSS and scripting with slightly separate considerations for mouse and keyboard users.</p>

<h3 id="mouse-users">Mouse users</h3>

<p>The following example uses this CSS code to show and hide the submenus when the parent menu items are hovered:</p>

<figure class="code ">
  <figcaption>Code snippet: CSS</figcaption>

<div class="highlight"><pre class="highlight css"><code><span class="nt">nav</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="nt">li</span>       <span class="nt">ul</span> <span class="p">{</span> <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">nav</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="nt">li</span><span class="nd">:hover</span> <span class="nt">ul</span> <span class="p">{</span> <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;}</span>
</code></pre></div>
</figure>

<p>In addition, scripting is used to slightly delay the immediate closing of submenu items when the mouse leaves the area. This delay makes it easier to use the menu when navigation by a mouse is not very precise.</p>

<p>In the following example, a delay of one second is added using a timer:</p>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">

<nav role="presentation" aria-label="Main Navigation" id="flyoutnavmousefixed">
		<ul>
				<li><a href="#flyoutnavmousefixed">Home</a></li>
				<li><a href="#flyoutnavmousefixed">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnavmousefixed" aria-haspopup="true" aria-expanded="false">Space Bears</a>
						<ul>
								<li><a href="#flyoutnavmousefixed">Space Bear 6</a></li>
								<li><a href="#flyoutnavmousefixed">Space Bear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnavmousefixed">Mars Cars</a></li>
				<li><a href="#flyoutnavmousefixed">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavmousefixed {
			display:table;
			width:100%;
	}
	#flyoutnavmousefixed > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavmousefixed > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavmousefixed a,
	#flyoutnavmousefixed .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavmousefixed a {
			color: #fff;
			text-decoration: none;
			border: 1px solid #036;
	}
	#flyoutnavmousefixed a:hover,
	#flyoutnavmousefixed a:focus {
			background-color: #fff;
			color: #036;
			text-decoration: underline;
	}
	#flyoutnavmousefixed .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavmousefixed > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavmousefixed > ul > li.open > ul {
		display:block;
	}

	#flyoutnavmousefixed > ul > li > ul a{
		border-bottom-width: 1px;
	}
</style>

<script>
var menuItems1 = document.querySelectorAll('#flyoutnavmousefixed li.has-submenu');
var timer1;

Array.prototype.forEach.call(menuItems1, function(el, i){
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutnavmousefixed .has-submenu.open").className = "has-submenu";
				}, 1000);
		});
});
</script>


  </div></figure>


<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>

<div class="highlight"><pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">menuItems</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">li.has-submenu</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mouseover</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">has-submenu open</span><span class="dl">"</span><span class="p">;</span>
		<span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
	<span class="p">});</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mouseout</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
			<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">.has-submenu.open</span><span class="dl">"</span><span class="p">).</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">has-submenu</span><span class="dl">"</span><span class="p">;</span>
		<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
</figure>

<h3 id="keyboard-users">Keyboard Users</h3>

<p>Submenus should not open when using the tab key to navigate through the menu, as keyboard users would then have to step through all submenu items to get to the next top-level item. Instead, consider one of the following approaches.</p>

<h4 class="ap" id="use-parent-as-toggle">Use parent as toggle</h4>

<p>Use this approach in situations where the parent menu item only summarizes the submenu and doesn’t have to carry out a function, such as linking to a web page. In this case, the submenu is opened by a script when the user activates the top-level item and closed when the focus leaves the submenu.</p>

<div class="notes ">

<p><strong>Note:</strong> The value of the <code>href</code> attribute is ignored but you might still want to link to an existing document in case JavaScript is not loaded.</p>

</div>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">

<nav role="presentation" aria-label="Main Navigation" id="flyoutnavkbfixed">
		<ul>
				<li><a href="#flyoutnavkbfixed">Home</a></li>
				<li><a href="#flyoutnavkbfixed">Shop</a></li>
				<li class="has-submenu">
						<a href="#flyoutnavkbfixed" aria-expanded="false" aria-haspopup="true">Space Bears</a>
						<ul>
								<li><a href="#flyoutnavkbfixed">Space Bear 6</a></li>
								<li><a href="#flyoutnavkbfixed">Space Bear 6 Plus</a></li>
						</ul>
				</li>
				<li><a href="#flyoutnavkbfixed">Mars Cars</a></li>
				<li><a href="#flyoutnavkbfixed">Contact</a></li>
		</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavkbfixed {
			display:table;
			width:100%;
	}
	#flyoutnavkbfixed > ul {
			margin: 0;
			padding: 0;
			display: table-row;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavkbfixed > ul > li {
			display:table-cell;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavkbfixed a,
	#flyoutnavkbfixed .current {
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavkbfixed a {
			color: #fff;
			text-decoration: none;
      border: 1px solid #036;
	}
	#flyoutnavkbfixed a:hover,
		#flyoutnavkbfixed a:focus {
			background-color: #fff;
			color: #036;
			border: 1px solid #036;
			text-decoration: underline;
	}
	#flyoutnavkbfixed .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavkbfixed > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavkbfixed > ul > li.open > ul {
		display:block;
	}

	#flyoutnavkbfixed > ul > li > ul a{
		border-bottom-width: 1px;
	}
</style>

<script>
// focusin/out event polyfill (firefox)

!function(){
	var w = window,
	d = w.document;

	if( w.onfocusin === undefined ){
		d.addEventListener('focus' ,addPolyfill ,true);
		d.addEventListener('blur' ,addPolyfill ,true);
		d.addEventListener('focusin' ,removePolyfill ,true);
		d.addEventListener('focusout' ,removePolyfill ,true);
	}
	function addPolyfill(e){
		var type = e.type === 'focus' ? 'focusin' : 'focusout';
		var event = new CustomEvent(type, { bubbles:true, cancelable:false });
		event.c1Generated = true;
		e.target.dispatchEvent( event );
	}
	function removePolyfill(e){
if(!e.c1Generated){ // focus after focusin, so chrome will the first time trigger tow times focusin
	d.removeEventListener('focus' ,addPolyfill ,true);
	d.removeEventListener('blur' ,addPolyfill ,true);
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
}
setTimeout(function(){
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
});
}
}();

function hasClass(el, className) {
	if (el.classList) {
		return el.classList.contains(className);
	} else {
		return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);
	}
}

var menuItems1 = document.querySelectorAll('#flyoutnavkbfixed li.has-submenu');
var timer1, timer2;

Array.prototype.forEach.call(menuItems1, function(el, i){
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						var opennav = document.querySelector("#flyoutnavkbfixed .has-submenu.open");
						opennav.className = "has-submenu";
						opennav.querySelector('a').setAttribute('aria-expanded', "false");
				}, 1000);
		});
		el.querySelector('a').addEventListener("click",  function(event){
			if (this.parentNode.className == "has-submenu") {
				this.parentNode.className = "has-submenu open";
				this.setAttribute('aria-expanded', "true");
			} else {
				this.parentNode.className = "has-submenu";
				this.setAttribute('aria-expanded', "false");
			}
			event.preventDefault();
		});
		var links = el.querySelectorAll('a');
		Array.prototype.forEach.call(links, function(el, i){
			el.addEventListener("focus", function() {
				if (timer2) {
					clearTimeout(timer2);
					timer2 = null;
				}
			});
			el.addEventListener("blur", function(event) {
				timer2 = setTimeout(function () {
					var opennav = document.querySelector("#flyoutnavkbfixed .has-submenu.open")
					if (opennav) {
						opennav.className = "has-submenu";
						opennav.querySelector('a').setAttribute('aria-expanded', "false");
					}
				}, 10);
			});
		});
});
</script>


  </div></figure>


<p>The following code iterates through all top-level items with the class <code>has-submenu</code> and adds a click event, which opens or closes the submenu depending on its state. Also, the <code>aria-expanded</code> attribute is set to <code>true</code> while the submenu is open, and to <code>false</code> otherwise.</p>

<div class="notes ">

<p><strong>Note:</strong> Despite the name, click events are activated regardless of the input method as soon as the link gets activated.</p>

</div>

<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>

<div class="highlight"><pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">menuItems</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">li.has-submenu</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">has-submenu</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">has-submenu open</span><span class="dl">"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">aria-expanded</span><span class="dl">'</span><span class="p">,</span> <span class="dl">"</span><span class="s2">true</span><span class="dl">"</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">has-submenu</span><span class="dl">"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">aria-expanded</span><span class="dl">'</span><span class="p">,</span> <span class="dl">"</span><span class="s2">false</span><span class="dl">"</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
</figure>

<h4 class="ap" id="use-button-as-toggle">Use button as toggle</h4>

<p>For situations when the parent menu item needs to carry out a function, such as linking to a web page, a separate button can be added to the parent item, to open and close the submenu. This button can also act as a visual indicator for the presence of a submenu.</p>

<figure class="sample show-overflow">
  <figcaption>Example: </figcaption>
  <div class="box-content">

<nav role="presentation" aria-label="Main Navigation" id="flyoutnavkbbtn">
	<ul>
		<li><a href="#flyoutnavkbbtn">Home</a></li>
		<li><a href="#flyoutnavkbbtn">Shop</a></li>
		<li class="has-submenu">
			<a href="#flyoutnavkbbtn" aria-haspopup="true">Space Bears</a>
			<ul>
				<li><a href="#flyoutnavkbbtn">Space Bear 6</a></li>
				<li><a href="#flyoutnavkbbtn">Space Bear 6 Plus</a></li>
			</ul>
		</li>
		<li><a href="#flyoutnavkbbtn">Mars Cars</a></li>
		<li><a href="#flyoutnavkbbtn">Contact</a></li>
	</ul>
</nav>

<style>
.show-overflow {
		overflow: visible !important;
}

.show-overflow .box-content {
		overflow: visible !important;
}
	#flyoutnavkbbtn {
			display:table;
			width:100%;
	}
	#flyoutnavkbbtn > ul {
			margin: 0;
			padding: 0;
			display:flex;
			background-color: #036;
			color: #fff;
	}
	#flyoutnavkbbtn > ul > li {
			display:flex;
			width: 20%;
			text-align: center;
			position:relative;
	}
	#flyoutnavkbbtn a,
	#flyoutnavkbbtn .current {
			flex:1;
			display: block;
			padding: .25em;
			border-color: #E8E8E8;
	}
	#flyoutnavkbbtn a {
			color: #fff;
			text-decoration: none;
      border: 1px solid #036;
	}
	#flyoutnavkbbtn a:hover,
	#flyoutnavkbbtn a:focus {
			background-color: #fff;
			color: #036;
			border: 1px solid #036;
			text-decoration: underline;
	}
	#flyoutnavkbbtn .current {
			background-color: #bbb;
			color: #000;
			border-color: #444;
	}

	#flyoutnavkbbtn > ul > li > ul {
		display: none;
		position:absolute;
		left:0;
		right:0;
		top:100%;
		padding:0;
		margin:0;
		background-color: #036;
	}

#flyoutnavkbbtn > ul > li.open > ul {
		display:block;
	}

	#flyoutnavkbbtn > ul > li > ul a{
		border-bottom-width: 1px;
	}
	#flyoutnavkbbtn .has-submenu > a:after {
		margin-left: 5px;
		line-height: 14px;
		content: '';
	}
	#flyoutnavkbbtn .has-submenu:hover > a:hover:after,
	#flyoutnavkbbtn .has-submenu > a:focus:after {
		content: '';
	}

	#flyoutnavkbbtn .has-submenu button {
		background-color: transparent;
		border: none;
		padding:0;
		line-height: 1;
		padding: 3px;
	}

	 #flyoutnavkbbtn .has-submenu button > span {
		display:inline-block;
		width: .8em;
		height: .8em;
		background: url(../../img/ex-dropdown-inactive-2084a51c.png) center no-repeat;
	}

	#flyoutnavkbbtn .has-submenu:hover button > span,
	#flyoutnavkbbtn .has-submenu button:focus > span {
		background: url(../../img/ex-dropdown-active-330d8be7.png) #fff;
	}

	#flyoutnavkbbtn .has-submenu button,
	#flyoutnavkbbtn .has-submenu a:focus + button {
		background-color: #036;
	}
	#flyoutnavkbbtn .has-submenu:hover button,
	#flyoutnavkbbtn .has-submenu button:hover,
	#flyoutnavkbbtn .has-submenu button:focus {
		background: #FFF;
		border: 1px solid #036;
		border-left: none;
	}
</style>

<script>
// focusin/out event polyfill (firefox)

!function(){
	var w = window,
	d = w.document;

	if( w.onfocusin === undefined ){
		d.addEventListener('focus' ,addPolyfill ,true);
		d.addEventListener('blur' ,addPolyfill ,true);
		d.addEventListener('focusin' ,removePolyfill ,true);
		d.addEventListener('focusout' ,removePolyfill ,true);
	}
	function addPolyfill(e){
		var type = e.type === 'focus' ? 'focusin' : 'focusout';
		var event = new CustomEvent(type, { bubbles:true, cancelable:false });
		event.c1Generated = true;
		e.target.dispatchEvent( event );
	}
	function removePolyfill(e){
if(!e.c1Generated){ // focus after focusin, so chrome will the first time trigger tow times focusin
	d.removeEventListener('focus' ,addPolyfill ,true);
	d.removeEventListener('blur' ,addPolyfill ,true);
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
}
setTimeout(function(){
	d.removeEventListener('focusin' ,removePolyfill ,true);
	d.removeEventListener('focusout' ,removePolyfill ,true);
});
}
}();

function hasClass(el, className) {
	if (el.classList) {
		return el.classList.contains(className);
	} else {
		return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);
	}
}

var menuItems1 = document.querySelectorAll('#flyoutnavkbbtn li.has-submenu');
var timer1, timer2;

var parseHTML = function(str) {
	var tmp = document.implementation.createHTMLDocument();
	tmp.body.innerHTML = str;
	return tmp.body.children;
};

Array.prototype.forEach.call(menuItems1, function(el, i){
		var activatingA = el.querySelector('a');
		var btn = '<button><span><span class="visuallyhidden">show submenu for “' + activatingA.text + '”</span></span></button>';
		activatingA.insertAdjacentHTML('afterend', btn);
		el.addEventListener("mouseover", function(event){
				this.className = "has-submenu open";
				this.querySelector('a').setAttribute('aria-expanded', "true");
				this.querySelector('button').setAttribute('aria-expanded', "true");
				clearTimeout(timer1);
		});
		el.addEventListener("mouseout", function(event){
				timer1 = setTimeout(function(event){
						document.querySelector("#flyoutnavkbbtn .has-submenu.open").className = "has-submenu";
						document.querySelector('#flyoutnavkbbtn .has-submenu.open a').setAttribute('aria-expanded', "false");
						document.querySelector('#flyoutnavkbbtn .has-submenu.open button').setAttribute('aria-expanded', "false");
				}, 1000);
		});
		el.querySelector('button').addEventListener("click",  function(event){
			if (this.parentNode.className == "has-submenu") {
				this.parentNode.className = "has-submenu open";
				this.parentNode.querySelector('a').setAttribute('aria-expanded', "true");
				this.parentNode.querySelector('button').setAttribute('aria-expanded', "true");
			} else {
				this.parentNode.className = "has-submenu";
				this.parentNode.querySelector('a').setAttribute('aria-expanded', "false");
				this.parentNode.querySelector('button').setAttribute('aria-expanded', "false");
			}
			event.preventDefault();
		});
		var links = el.querySelectorAll('a');
		Array.prototype.forEach.call(links, function(el, i){
			el.addEventListener("focus", function() {
				if (timer2) {
					clearTimeout(timer2);
					timer2 = null;
				}
			});
			el.addEventListener("blur", function(event) {
				timer2 = setTimeout(function () {
					var opennav = document.querySelector("#flyoutnavkbbtn .has-submenu.open")
					if (opennav) {
						opennav.className = "has-submenu";
						opennav.querySelector('a').setAttribute('aria-expanded', "false");
						opennav.querySelector('button').setAttribute('aria-expanded', "false");
					}
				}, 10);
			});
		});
});
</script>


  </div></figure>


<p>The following code adds a button to every top-level menu item with a submenu. When the button is activated, it shows or hides the submenu. The invisible label of the button is set to “show submenu” or “hide submenu”, reflecting the state of the submenu.</p>

<div class="notes ">

<p><strong>Note:</strong> If possible, include the name of the parent menu item in the button label; for example: “show Space Bears submenu”.</p>

</div>

<figure class="code ">
  <figcaption>Code snippet: JavaScript</figcaption>

<div class="highlight"><pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">menuItems</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">li.has-submenu</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">menuItems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">activatingA</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
	<span class="kd">var</span> <span class="nx">btn</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;button&gt;&lt;span&gt;&lt;span class="visuallyhidden"&gt;show submenu for “</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">activatingA</span><span class="p">.</span><span class="nx">text</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">”&lt;/span&gt;&lt;/span&gt;&lt;/button&gt;</span><span class="dl">'</span><span class="p">;</span>
	<span class="nx">activatingA</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">afterend</span><span class="dl">'</span><span class="p">,</span> <span class="nx">btn</span><span class="p">);</span>

	<span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">has-submenu</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">has-submenu open</span><span class="dl">"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">aria-expanded</span><span class="dl">'</span><span class="p">,</span> <span class="dl">"</span><span class="s2">true</span><span class="dl">"</span><span class="p">);</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">aria-expanded</span><span class="dl">'</span><span class="p">,</span> <span class="dl">"</span><span class="s2">true</span><span class="dl">"</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">has-submenu</span><span class="dl">"</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">aria-expanded</span><span class="dl">'</span><span class="p">,</span> <span class="dl">"</span><span class="s2">false</span><span class="dl">"</span><span class="p">);</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">aria-expanded</span><span class="dl">'</span><span class="p">,</span> <span class="dl">"</span><span class="s2">false</span><span class="dl">"</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
</figure>



      <div class="resources">
  <h2 id="related">Related WCAG resources</h2>
  <div class="resources-inner">
	  <p>These tutorials provide best-practice guidance on implementing accessibility in different situations. This page combined the following WCAG success criteria and techniques from different conformance levels:</p>
	    <p><strong>Techniques:</strong></p>
	    <ul>
		            <li><a href="https://www.w3.org/WAI/WCAG21/Techniques/html/H4">H4: Creating a logical tab order through links, form controls, and objects</a></li>
		            <li><a href="https://www.w3.org/WAI/WCAG21/Techniques/client-side-script/SCR26">SCR26: Inserting dynamic content into the Document Object Model immediately following its trigger element</a></li>
	    </ul>
  </div>
</div>


      <nav role="navigation" aria-label="Previous/Next" id="tools">
  <ul>
          <li class="prev">
            <span><a href="../styling/" rel="prev" class=""><span class="count"></span><span class="txt"><span class="dir">Previous:</span><span class="title">Styling</span></span></a></span>
          </li>
          <li class="next">
            <span><a href="../application-menus/" rel="next" class=""><span class="count"></span><span class="txt"><span class="dir">Next:</span><span class="title">Application Menus</span></span></a></span>
          </li>
  </ul>
</nav>


      <aside class="side-box github" role="complementary">
  <h2 class="heading">We welcome your ideas</h2>
  <p>Please send any ideas, suggestions, or comments to the <a href="mailto:wai-eo-editors@w3.org?subject=[Tutorial%20Feedback]">(publicly-archived) mailing list wai-eo-editors@w3.org</a>. You can also contribute to the <a href="https://github.com/w3c/wai-tutorials" rel="nofollow">code directly on Github</a>.</p>

	<div class="editpage">
  	<a class="btn" href="https://github.com/w3c/wai-tutorials/blob/master/source/menus/flyout.html.erb.md">Fork &amp; edit this page on Github</a>
	</div>

</aside>


    </div>
  </article>
</main>
<div class="navigation">
  <nav role="navigation" aria-label="Main" id="nav">
    <h2 class="list-heading" id="list-heading-tutorials">
          Menus Tutorial
    </h2>
    <ul aria-labelledby="list-heading-tutorials">
          <li class="intro"><a href="../" class=""><span class="count"></span><span class="txt">Concepts</span></a></li>
            <li>
              <a href="../structure/" class=""><span class="count"></span><span class="txt">Structure</span></a>
            </li>
            <li>
              <a href="../styling/" class=""><span class="count"></span><span class="txt">Styling</span></a>
            </li>
            <li>
              <span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Fly-out Menus</span></span>
            </li>
            <li>
              <a href="../application-menus/" class=""><span class="count"></span><span class="txt">Application Menus</span></a>
            </li>
            <li class="tips">
              <a href="../application-menus-code/" class=""><span class="count"></span><span class="txt">Application Menu Example & Code</span></a>
            </li>
    </ul>
    <h2 class="list-heading" id="list-heading-topics">
  All Tutorials
</h2>
<ul class="topics" aria-labelledby="list-heading-topics">
	<li><a href="../../page-structure/"><span class="count"></span><span class="txt">Page Structure</span></a></li>
  <li><span class="current-a"><span class="count"></span><span class="txt"><span class="visuallyhidden">Current: </span>Menus</span></span></li>
	<li><a href="../../images/"><span class="count"></span><span class="txt">Images</span></a></li>
	<li><a href="../../tables/"><span class="count"></span><span class="txt">Tables</span></a></li>
	<li><a href="../../forms/"><span class="count"></span><span class="txt">Forms</span></a></li>
  <li><a href="../../carousels/"><span class="count"></span><span class="txt">Carousels</span></a></li>
</ul>

  </nav>
</div>
  </div>
	<footer id="footer" role="contentinfo" aria-labelledby="wai_footerheading">
    <div>
		<h2 id="wai_footerheading">Document Information</h2>
    <p><strong>Feedback: We welcome ideas for improvements, bug reports, and comments</strong> via <a href="https://github.com/w3c/wai-tutorials">GitHub</a> or e-mail to <a href="mailto:wai-eo-editors@w3.org">wai-eo-editors@w3.org</a> (a publicly archived list) or <a href="mailto:wai@w3.org">wai@w3.org</a> (a WAI staff-only list).</p>
		<ul>
			<li><strong>Status:</strong>
	      	Updated
	      27 July 2019
		      (first published May 2015)
			</li>
      <li>
  Editors:
  <ul class="inline">
    <li><a href="https://www.w3.org/People/yatil/">Eric Eggert</a></li><li><a href="https://www.w3.org/People/shadi/">Shadi Abou-Zahra</a></li>
  </ul>

  Contributors:
  <ul class="inline">
    <li>The Education and Outreach Working Group (<a href="https://www.w3.org/WAI/EO/">EOWG</a>)</li>
  </ul>
</li>

<li>
  Developed with support from the <a href="https://www.w3.org/WAI/ACT/">WAI-ACT project</a>, co-funded by the <strong>European Commission <abbr title="Information Society Technologies">IST</abbr> Programme</strong>.
</li>

      <li>[<a href="../../attributions/" class=""><span class="count"></span><span class="txt">Attributions</span></a>]  [<a href="../../changelog/" class=""><span class="count"></span><span class="txt">Changelog</span></a>]</li>
    </ul>
    <p>
    	[<a href="https://www.w3.org/WAI/sitemap.html">WAI Site Map</a>]
    	[<a href="https://www.w3.org/WAI/sitehelp.html">Help with WAI Website</a>]
    	[<a href="https://www.w3.org/WAI/search.php">Search</a>]
    	[<a href="https://www.w3.org/WAI/contacts">Contacting WAI</a>]
		</p>
    <div class="copyright">
        <p>
	        Copyright &#xA9; 2019 W3C <sup>&#xAE;</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>) <a href="/Consortium/Legal/ipr-notice">Usage policies apply</a>.
        </p>
      </div><!-- ends copyright -->
    </div>
	</footer>
	<script src="../../javascripts/main-4d3ee932.js"></script>
  <!-- Piwik -->
  <script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["setDomains", ["*.www.w3.org/WAI"]]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
  var u="//www.w3.org/analytics/piwik/";
  _paq.push(['setTrackerUrl', u+'piwik.php']);
  _paq.push(['setSiteId', 328]);
  var d=document, g=d.createElement('script'),
  s=d.getElementsByTagName('script')[0];
  g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js';
  s.parentNode.insertBefore(g,s);
  })();
  </script>
  <noscript><p><img src="//www.w3.org/analytics/piwik/piwik.php?idsite=328"
  style="border:0;" alt="" /></p></noscript>
  <!-- End Piwik Code -->
	</body>
</html>

