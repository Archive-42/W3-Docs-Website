[<img src="rusFigures/w3c_home.png" alt="W3C" width="72" height="48" />](http://www.w3.org/)

    Данный документ представляет собой перевод на русский язык Заметки Рабочей Группы W3C от 12 Апреля 2006.
    Defining N-ary Relations on the Semantic Web, W3C Working Group Note 12 April 2006,
    английский вариант которой является единственным официальным изданием.

    Перевод данной заметки на русский язык выполнен специалистом компании Ранат Рабчевским Е.А.

    Перевод может содержать ошибки и неточности, и мы работаем над его улучшением.
    Все комментарии, касающиеся настоящего перевода, просьба направлять по адресу: evgeny@ranat.ru
    Copyright © 2006 Ранат, Все права защищены. Перевод на русский язык.

# Определение N-мерных отношений в Семантической Сети

## Заметка Рабочей Группы W3C от 12 Апреля 2006

Эта версия:  
[http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/]()

Последняя версия:  
<http://www.w3.org/TR/swbp-n-aryRelations>

Предыдущая версия:  
<http://www.w3.org/TR/2004/WD-swbp-n-aryRelations-20040721/>

Авторы:  
[Natasha Noy](http://smi.stanford.edu/people/noy), Стэнфордский Университет

[Alan Rector](http://www.cs.man.ac.uk/mig/people/rector/), Университет Манчестера

Соавторы:  
[Pat Hayes](http://www.ihmc.us/users/user.php?UserID=42), IHMC

[Chris Welty](http://www.research.ibm.com/people/w/welty/), IBM Research

  
Также смотри [Благодарности](#acknowledgements).

[Copyright](http://www.w3.org/Consortium/Legal/ipr-notice#Copyright) © 2006 [W3C](http://www.w3.org/)<sup>®</sup> ([MIT](http://www.csail.mit.edu/), [ERCIM](http://www.ercim.org/), [Keio](http://www.keio.ac.jp/)), All Rights Reserved. W3C [liability](http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer), [trademark](http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks) and [document use](http://www.w3.org/Consortium/Legal/copyright-documents) rules apply.

---

## <span id="abstract">Аннотация</span>

В языках Семантической Сети, таких как RDF и OWL, свойство являются _двойными_ отношением: оно используется, чтобы связать два концепта или концепт со значением. Однако, в некоторых случаях, естественный и удобный способ представить определенные концепты - это использовать отношения для связи концепта с более чем одним концептом или значением. Эти отношения называются _N-мерными отношениями_. Например, мы хотим представить свойства отношения, такие как степень нашей уверенности в этом, четкость или сила отношения, релевантность отношения, и так далее. Другой пример показывающий отношения между множеством концептов, таких как покупатель, продавец, и объект, который был куплен, при описании покупки книги. Этот документ представляет N-мерные отношения в RDF и OWL, и обсуждает, что пользователи должны рассматривать, когда выбирают эти модели.

## Статус этого документа

_Этот секция описывает статус этого документа на момент его публикации. Другие документы могут заменять собой этот документ. Список настоящих W3C публикаций и последняя версия этого технического сообщения могут быть найдены в [указателе технических сообщений W3C](http://www.w3.org/TR/) на http://www.w3.org/TR/._

Этот документ является [Заметкой Рабочей Группы](http://www.w3.org/2005/10/Process-20051014/#WGNote), сделанной [Рабочей Группой Лучшей Практики и Развертывания Семантической Сети](http://www.w3.org/2001/sw/BestPractices/), частью [Сообщества Семантической Сети W3C](http://www.w3.org/2001/sw/). Это документ - один из набора документов, обеспечивающих введение и обзор моделей разработки онтологий, разработанных [Специальной Комиссией Разработки Онтологий и Моделей](http://www.w3.org/2001/sw/BestPractices/OEP/) Рабочей Группы SWBPD.

Что касается публикации этой Заметки Рабочей Группы SWBPD, Рабочая Группа закончила работу над этим документом. Изменения предыдущего Рабочего Проекта собраны в [приложении](#Changes). Комментарии к этому документу могут быть посланы на <public-swbp-wg@w3.org>, почтовую рассылку с [общим архивом](http://lists.w3.org/Archives/Public/public-swbp-wg/). Дальнейшее обсуждение по этому материалу может также быть послано на почтовый список [Группы Интересующихся Семантической Сетью](http://www.w3.org/2001/sw/interest/), <semantic-web@w3.org>, также с [публичным архивом](http://lists.w3.org/Archives/Public/semantic-web/).

Публикация как Заметка Рабочей Группы не подразумевает одобрения W3C Сообществом. Это черновик документа, и может быть обновлен, перемещен или устареть из-за других документов со временем. Неуместно ссылаться на этот документ, также как и на другие, работа над которыми в процессе.

Этот документ произведен группой, работающей в соответствии с [Патентной Политикой W3C от 5 Февраля 2004](http://www.w3.org/Consortium/Patent-Policy-20040205/). Этот документ только информативный. W3C поддерживает [публичный список всех объявлений патентов](http://www.w3.org/2004/01/pp-impl/35495/status) , сделанный в соответствии с подлежащими передаче групп; эта страница также включает инструкции для объявления патентов. Человек, который имеет актуальные информацию по патентам, в которых видит содержание [Существенных Требований](http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential) должен объявить информацию в соответствии с [секцией 6 Патентной Политики W3C](http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure).

## Оглавление

1.  [Основные проблемы](#general)
2.  [Примеры вариантов использования](#examples)
3.  [Представление шаблонов](#representation)
    1.  [Словари для n-мерных отношений в RDF и OWL](#vocabulary)
    2.  [Шаблон 1: Введение нового класса для отношения](#pattern1)
        1.  [Вариант Использования 1: дополнительные атрибуты, описывающие отношение](#useCase1)
        2.  [Вариант Использования 2: различные аспекты одного отношения](#useCase2)
        3.  [Вариант Использования 3: N-мерное отношение без выделенного участника](#useCase3)
        4.  [Размышление, когда вводить новый класс для отношения](#choosingPattern1or2)
    3.  [Шаблон 2: Использование списков для аргументов в отношениях](#pattern2)
4.  [N-мерные отношения и материализация в RDF](#RDFReification)
5.  [Дополнительные Предпосылки](#background)
    1.  [Замечания к словарю: Отношения и экземпляры отношений, Свойства и экземпляры Свойств](#Note)
    2.  [Неименованные против именованных экземпляров в этих шаблонах](#anonvnamed)
    3.  [Замечания](#sec-notes)
6.  [Ссылки](#References)
7.  [Изменения](#Changes)
8.  [Благодарности](#acknowledgements)

---

## Основные проблемы

В языках Семантической Сети, таких как RDF и OWL, свойства являются _двойным_ отношением: экземпляры свойств связывают два концепта. Часто мы ссылаемся на второй концепт, как на "значение" или оба концепта, как "аргументы" \[Смотри [замечания к словарю\]](#Note).

Проблема 1: Если экземпляр свойства может связать два концепта, как нам вести дело с ситуациями, где нам нужно _описать_ экземпляры отношений, таких как уверенность, сила, и т.д.?

Проблема 2: Если экземпляр свойства может связать два концепта, как нам представлять отношения между более чем двумя концептами? ("n-мерные отношения")

Проблема 3: Если экземпляр свойства может связать два концепта, как нам представить отношения, в которых один из участников является скорее упорядоченным списком концептов, чем одиночный концепт?

Решения первых двух проблем тесно связано; третья проблема отличается качественно, не смотря на то, что это может быть адоптировано, чтобы соответствовать проблеме первой в определенных случаях. Заметьте, что мы не используем RDF воплощение (reification) в этих шаблонах; причины для этого решения обсуждаются в [последней секции](#RDFReification).

#### Описание данных, используемое в этом документе

Формат данных, используемый в этом документе это [TURTLE](http://www.w3.org/2001/sw/DataAccess/df1/) \[[TURTLE](#turtle)\], используется чтобы детально показать каждый триплет. Черепаха позволяет URI-ям быть сокращенными с префиксами:

    @prefix dc:   <http://purl.org/dc/elements/1.1/> .
    @prefix :     <http://example.org/book/> .
    :book1  dc:title  "Defining N-ary Relations on the Semantic Web" .

## Примеры вариантов использования

Несколько общих вариантов использования подпадают под категорию n-мерных отношений. Здесь показаны несколько примеров:

1.  _<span id="example1"></span>Очень вероятно, что Кристина имеет опухоль в груди_. Здесь двойное отношение между персоной `Кристина` и диагнозом `Опухоль_Груди_Кристины` и качественное значение вероятности описывает это отношение (`очень`).
2.  _<span id="example2"></span>Стив имеет температуру, которая высока, но падает_. Концепт `Стив` имеет два значения двух различных аспектов для отношения `имеет_температуру`: это `величина`, которая `высокая` и `тенденция`, которая `падает`.
3.  _<span id="example3"></span>Джон покупает книгу "Лев Ленни" с books.example.com за $15 в подарок на день рождения._ Это отношение, в котором принимают отношение `Джон`, сущность `books.example.com` и книга `Лев_Ленни`. Это отношение имеет другие компоненты, такие как цель (`подарок_на_день_рождения`) и число (`$15`).
4.  _<span id="example4"></span>Полет 3177 Объединенных Авиалиний посещает следующие аэропорты: LAX, DFW, и JFK._ Это отношение между концептом полет и тремя городами, которые посещаются, `LAX`, `DFW`, `JFK`. Заметьте, что порядок аэропортов имеет значение, и указывает порядок, в котором рейс посещает эти аэропорты.

Другой способ подумать о вариантах использования - это как они могут возникнуть в процессе эволюции онтологии.

1.  Мы понимаем, что отношения, которые, как мы думали, были двойными, реально, нуждаются в аргументах, сверх того - общий исток варианта использования 1.
2.  Мы понимаем, что двойные свойства всегда шагают вместе, должны быть представлены одним n-мерным отношением - общий исток варианта использования 2.
3.  Сначала, мы понимаем отношение, реально среди нескольких вещей - общий исток варианта использования 3.
4.  Природа отношения, где один или более аргументов качественно являются скорее последовательностью, чем отдельным концептами - вариант использования 4.

## Представление шаблонов

Как говорилось ранее, в языках Семантической Сети, свойства являются двойными отношениями. Каждый экземпляр свойства связывает концепт с другим концептом или значением, как показано ниже.

<img src="rusFigures/binaryRe.jpg" alt="Свойство P, соотносящее ресурсы A и B" width="242" height="59" />

Мы бы хотели, чтобы другой концепт или простое значение `С` был частью этого экземпляра свойства:

![Свойство P, соотносящее ресурсы A, В и С](rusFigures/addingTh.jpg)

`'P'` теперь ссылается на экземпляр отношения между `'A'`, `'B'`, и `'C'`. (Здесь могли быть и другие концепты '`D`', '`E`', и '`F`'. Однако, для простоты, мы покажем большинство вариантов использования, предполагая одиночный дополнительный концепт. Таким же способом мы можем обрабатывать большее количество концептов.)

Одно общее решение этой проблемы ([шаблон 1](#pattern1)) - это представить отношение, скорее как класс чем свойство. Экземпляры концептов таких классов соответствуют экземплярам свойств. Дополнительные свойства обеспечивают двойные связи для каждого аргумента отношения. Мы можем моделировать примеры [1](#example1), [2](#example2), и [3](#example3) помимо использования этого шаблона. Например, в [примере 1](#example1) экземпляр нового класса `Отношение_Диагноза` представлял бы факт того, что Кристине был поставлен диагноз опухоль груди с высокой вероятностью. Аналогично, в [примере 3](#example3) экземпляр класса `Покупка` представлял бы факт того, что Джон купил книгу "Лев Ленни" на books.com за $15.

Второе решение ([шаблон 2](#pattern2)) - это представить несколько концептов, участвующих в отношении, как коллекцию или упорядоченный список. Мы используем это решение, когда порядок аргументов в n-мерном отношении является важным в модели, также как и в [примере 4](#example4) выше.

### <span id="vocabulary"></span>Словарь для n-мерных отношений в RDF и OWL

Комиссия планирует выпустить предложенный словарь для описания класса, представляющего n-мерные отношения, и для описания картирования между n-мерными отношениями в RDF и OWL и других языках. Планируется выпустить замечания к этому словарю.

### <span id="pattern1"></span>Шаблон 1: Введение нового класса для отношения

Мы представляем шаблон, мы создаем новый класс и _n_ новых свойств, чтобы представить _n_-мерные отношение. Экземпляр отношения, связывающий _n_ концептов, тогда является экземпляром этого класса. Мы рассматриваем три варианта использования для этого шаблона, проиллюстрированных [примерами 1-3](#example1) выше.

Онтологически, классы, создаваемые в этом методе, часто называются "рейфированными отношениями" (reified relations). Рейфированные отношения играют важную роль во многих онтологиях[<sup>3</sup>](#refToRdfValue) (например Ontoclean/DOLCE, Sowa, GALEN).<span style="color: #E50000"> </span>Однако, сообщества RDF и Topic Map использовали слово "рейфировать", чтобы обозначить разные вещи (смотри [замечания](#RDFReification) ниже). Таким образом, чтобы избежать конфузов, мы не используем термин "рейфикация" в этом документе.

---

#### <span id="useCase1"></span>Вариант Использования 1: дополнительные атрибуты, описывающие отношение

В первом варианте использования, нам необходимо представить дополнительный атрибут, описывающий экземпляр отношения ([пример 1](#example1), _Кристина имеет опухоль груди с высокой вероятностью_). Мы создаем концепт, который представляет экземпляр отношения само по себе, со связями субъекта отношения к этому экземпляру и со связями этого экземпляра ко всем участникам, которые представляют дополнительную информацию об этом экземпляре:

<img src="rusFigures/n-aryRel.jpg" alt="pattern 1" width="265" height="191" />

Для примера 1, выше (_Кристина имеет опухоль груди с высокой вероятностью_), концепт `Кристина` имеет свойство `имеет_диагноз`, которое имеет другой объект (`_:Отношение_Диагноза_1`, экземпляр класса `Отношение_Диагноза`) в качестве этого значения:

![Пример диагноза](rusFigures/diagnosi.jpg)

Концепт `_:Отношение_Диагноза_1` здесь представляет одиночный объект, инкапсулирующий оба диагноза (`Опухоль_Груди_Кристины`, особенный экземпляр `Болезнь`) и вероятность диагноза (`HIGH`)[<sup>3</sup>](#refToOtherNotes). Это содержит всю информацию, содержащуюся в оригинале 3 аргумента: кто был продиагностирован, какой диагноз, и какова его вероятность. Мы используем [пустые узлы в RDF](http://esw.w3.org/mt/esw/archives/000034.html) чтобы представить экземпляры отношения.

    :Кристина
          a       :Персона ;
          :имеет_диагноз _:Отношение_Диагноза_1 .

    :_Отношение_Диагноза_1
          a       :Отношение_Диагноза ;
          :вероятность_отношения :ВЫСОКАЯ;

          :значение_жиагноза :Опухоль_Груди_Кристины .

Каждый из 3 документов в оригинальном n-мерном отношении— кто диагностируется, какой диагноз, и его вероятность—дают повод для правдивых двойных отношений. В этом случае, есть три: `имеет_диагноз`, `значение_диагноза` и `вероятность_диагноза`.[<sup>4</sup>](#refToRdfValue)

Определения классов для концептов в этом шаблоне выглядит следующим образом:

![Классы в примере Диагноза](rusFigures/diagnosj.jpg)

Дополнительные метки на связях указывают OWL ограничения на свойства. Мы определяем и `значение_диагноза`, и `вероятность_диагноза` в качестве функциональных свойств, таким образом требующих, чтобы каждый экземпляр `Отношения_Диагноза` имел точно одно значение для `Болезни` и одно значение для `Вероятности`.

В RDFS, которая не имеет OWL ограничений функциональных свойств, связи представляют ограничение свойств `rdfs:range`. Например, класс `Отношение_Диагноза` - это диапазон свойства `имеет_диагноз`.

Здесь определение класса `Отношение_Диагноза`[](#refToOtherNotes) в OWL, предполагается, что оба свойства—`значение_диагноза` и `вероятность_диагноза`—описаны, как функциональные (мы предоставляем полный код примера на OWL и RDFS ниже):

    :Отношение_Диагноза
          a       owl:Class ;
          rdfs:subClassOf

                     [ a       owl:Restriction ;
                    owl:someValuesFrom :Болезнь ;

                     owl:onProperty :значение_диагноза
                  ] ;
          rdfs:subClassOf

                            [ a       owl:Restriction ;
                    owl:allValuesFrom :Probability_values ;

                                         owl:onProperty :вероятность_диагноза
                  ] .

В определении класса `Персона` (экземпляром которого является `Кристина`), мы специфицировали свойство `имеет_диагноз` с ограничением диапазона - класс `Отношение_Диагноза` (экземпляром, которого является `Отношение_Диагноза_1`):

    :Персона
          a       owl:Class ;
          rdfs:subClassOf
                  [ a       owl:Restriction ;

                       owl:allValuesFrom :Отношение_Диагноза ;
                    owl:onProperty :имеет_диагнозbr>
                                 ] .

Заметьте, что в обсуждаемом шаблоне, мы не делаем никаких предположений о лучшем способе представить вероятность этого события. Мы просто используем этот пример здесь.

#### RDFS код для этого примера

\[[RDFS](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/diagnosis.rdf)\]

#### OWL код для этого примера

\[[N3](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/diagnosis.n3)\] \[[RDF/XML](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/diagnosis.owl)\]

---

#### <span id="useCase2"></span>Вариант использования 2: различные аспекты одного отношения

Мы имеем различные варианты использования в примере 2 выше (_Стив имеет температуру, которая высокая, но падает_): В примере с диагнозом, многие увидят взаимоотношение, мы представляли как все еще _двойное_ отношение между концептом `Кристина` и диагнозом `Опухоль_Груди_Кристины`, который имеет вероятность, ассоциированную с этим. В этом примере отношение между концептом `Стив` и объектом, представляющем различные аспекты его температуры. В большинстве подразумеваемых интерпретаций, этот экземпляр отношения не может рассматриваться, как экземпляр двойного отношения с дополнительно приложенными атрибутами. Скорее, этот экземпляр отношения, соотносящий `Стива` и сложный объект, представляющий различные факты о его температуре. Такие случаи часто возникают в течение эволюции онтологии, когда мы понимаем, что два отношения нужно свернуть. Например, первоначально, мы могли иметь два свойства— `имеет_уровень_температуры` и `имеет_тенденцию_температуры`—оба связанные в человеческом понимании. Мы могли тогда понять, что реально эти свойства сложно переплетаются, потому что мы должны говорить о "температуре, которая приподнятая, но падает".

![Пример температуры для шаблона 1](rusFigures/temperat.jpg)

RDFS и OWL шаблоны, которые выполняют эту интуицию (implement this intuition), однако такие же как и в предыдущем примере. Класс `Персона` (экземпляром которого является концепт `Стив`) имеет свойство `имеет_температуру`, которое имеет в качестве диапазона класс отношения `Наблюдение_Температуры.` Экземпляры класса `Наблюдение_Температуры` (такие как `_:Наблюдение_Температуры_1` на рисунке) по очереди имеют свойства для `значение_температуры` и `тенденция_температуры`.

#### RDFS код для этого примера

\[[RDFS](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/temperature.rdf)\]

#### OWL код для этого примера

\[[N3](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/temperature.n3)\] \[[RDF/XML](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/temperature.owl)\]

---

#### Вариант Использования 3: N-мерное отношение без отмеченного участника

В некоторых случаях, n-мерное взаимоотношение связывает концепты, которые играют различные роли в структуре без каких-либо одиночных концептов, выступающих как субъект или "владелец" отношения, такого как `Покупка`, в примере 3 выше (_Джон покупает "Лев Ленни" на book from books.example.com за $15 в подарок на день рождения_). Здесь, отношение явно имеет более чем одного участника, и, во многих контекстах, никто из них не может быть описан просто одним (primary one). В этом случае, мы создаем концепты, чтобы представить экземпляры отношения со связями со всеми участниками:

![Вариант использования 3](rusFigures/n-aryRem.jpg)

В нашем специфичном примере, представление будет выглядеть следующим образом:

![Пример покупки](rusFigures/purchase.jpg)

`Покупка_1`[<sup>5</sup>](#purchaseName) является экземпляром концепта класса `Покупка`, класса представляющего экземпляр отношения:[<sup>6</sup>](#refToUnits)

    :Покупка_1
          a       :Покупка ;
          :имеет_покупателя :Джон ;
          :имеет_объект :Лев_Ленни ;

             :имее_цель :Подарок_на_День_рождения ;
          :имеет_число 15 ;
          :имеет_продавца :books.example.com .

Следующая диаграмма показывает соответствующие классы и свойства. Для задачи примера, мы указываем, что каждая покупка имеет точно одного `покупателя` (`Персона`), точно одного `продавца` (`Компания`), точно одну `сумму` и по крайней мере один `объект` (`Объект`).

![Классы примера с Покупкой](rusFigures/purchasf.jpg)

Диаграмма указывает на OWL ограничения. В RDFS стрелки могут рассматриваться как связи `rdfs:range`.

Класс `Покупка` описан по правилам OWL (для определения по RDFS смотри RDFS файл ниже):

    :Покупка
          a       owl:Class ;
          rdfs:subClassOf
                  [ a       owl:Restriction ;

                       owl:allValuesFrom :Покупка ;
                    owl:onProperty :имеет_цель
                  ] ;

                           rdfs:subClassOf
                  [ a       owl:Restriction ;
                    owl:cardinality 1
                           ;
                    owl:onProperty :имеет_покупателя
                  ] ;

                           rdfs:subClassOf
                  [ a       owl:Restriction ;
                    owl:onProperty
                           :имеет_покупателя ;
                    owl:someValuesFrom :Персона
                  ] ;

                               rdfs:subClassOf
                  [ a       owl:Restriction ;

                                  owl:cardinality 1 ;
                    owl:onProperty :имеет_продавца
                  ]
                                  ;
          rdfs:subClassOf
                  [ a       owl:Restriction ;

                                           owl:onProperty :имеет_продавца ;
                    owl:someValuesFrom
                                           :Компания
                  ] ;
          rdfs:subClassOf
                  [ a       owl:Restriction ;
                    owl:onProperty :имеет_объект
          ;
                    owl:someValuesFrom :Объект
                  ] .

Заметьте, что представление в OWL следуют из этого шаблона: OWL ограничения по существу являются тройными отношениями между классами, свойствами, и ограничениями значений. В этом случае, экземпляр класса `Restriction` подобен экземпляру `Покупка`.

#### RDFS код для этого примера

\[[RDFS](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/purchase.rdf)\]

#### OWL код для этого примера

\[[N3](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/purchase.n3)\] \[[RDF/XML](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/purchase.owl)\]

#### <span id="choosingPattern1or2"></span>Анализ случая, когда вводится новый класс для отношения

- В нашем примере, мы не дали _выразительных имен_ для экземпляров свойств или классов, используемых, чтобы представить n-мерные отношения, а простые метки `_:Наблюдение_за_Температурой_1`, `Покупка_1`, и т.д. В большинстве случаев, эти концепты не остаются сами по себе, а просто функционируют как дополнительные службы для группировки с другими объектами. Поэтому не предполагается работа с различными именами. Заметьте, что подобный подход принимался в [рейфицирующих объявлениях в RDF](http://www.w3.org/TR/2004/REC-rdf-primer-20040210/#reification).
- Создание нового класса, чтобы n-мерные отношения ограничивает многие OWL конструкции и создает _проблемы поддержки_. Проблемы возникают, когда мы хотим иметь локальный диапазон или ограничения кардинальности в некоторых ролях в n-мерном отношении, что зависит kn класса некоторых других ролей. Например, мы бы хотели сказать, что мы покупаем только экземпляры класса `Книга` в компаниях из категории `ПродавецКниг` (сравни [вариант использования 3](#useCase3)). Выражая это ограничение, требуется специальный подкласс класса n-мерного отношения, который представляет комбинацию ограничений. Например, нам потребуется создать класс `Покупка_Книги` с соответсвующим диапазоном ограничений для свойств `продавец` (`allValuesFrom ПродавецКниг`) и `объект` (`allValuesFrom Книга`). У нас пропала необходимость строить подробную структуру классов для представления всех возможных комбинаций.
- OWL позволяет определения _[инверсных свойств](http://www.w3.org/TR/owl-ref/#inverseOf-def)_. Определение инверсных свойств с n-мерными отношениями, использование любых шаблонов, указанных выше, требует больше работы, чем для двойных отношений. Для того чтобы указать инверсное свойство для n-мерного отношения, мы должны указать инверсию для каждого из свойств, участвующих в n-мерном отношении (с характерными ограничениями). Рассмотрим пример, `Джон` покупает книгу `Лев_ленни`. Нам может потребоваться иметь экземпляр инверсного отношения, связывающего книгу `Лев_Ленни` с персоной, которая купила её. Если мы имеем простое двойное отношение `Джон` `покупает` `Лев_Ленни`, описание инверсии просто: мы просто описываем свойство `куплен_тем-то` как инверсное для `покупает`:

      :куплен_тем-то
            a       owl:ObjectProperty ;
            owl:inverseOf :покупает .

  В отношении покупки, показанном для примера, однако, нам необходимо добавить инверсные отношения между участниками в отношении и самим экземпляром отношения:  
  <img src="rusFigures/purchasg.jpg" alt="Пример покупки с инверсными свойствами" width="581" height="246" />  
  Например, определения инверсных отношений для `покупателя` и `объекта` покупки, выглядит так:

      :покупатель_для
            a       owl:ObjectProperty ;
            owl:inverseOf :имеет_покупателя .
      :объект_для
            a       owl:ObjectProperty ;
            owl:inverseOf :имеет_объект .

  В определении класса `Персона`, мы включаем ограничение `allValuesFrom` для свойства `покупатель_для`, чтобы ограничить значения этого свойства для экземпляров класса `Покупка`:

      :Персона
            a       owl:Class ;
            rdfs:subClassOf
                    [ a       owl:Restriction
              ;
                      owl:onProperty :покупатель_для ;
                      owl:allValuesFrom :Покупка

                           ] .

  Заметьте, что значение инверсного свойства `покупатель_для` для концепта `Джон`, например, концепт `Покупка_1` скорее чем `объект` или `получатель` покупки.

---

### <span id="pattern2"></span>Шаблон 2: Использование списков для аргументов в отношении

Некоторые n-мерные отношения неестественно принадлежат каждому из вариантов использования, указанных выше, но более похожи на список или последовательность аргументов. Пример 4, выше (_Полет 3177 Объединенных авиалиний посещает следующие аэропорты: LAX, DFW, и JFK_,) попадает под эту категорию. Например, отношение между полетом и аэропортами, которые им посещаются, в порядке прибытия воздушного судна в каждый аэропорт. Это отношение могло бы содержать различное число аргументов, и здесь нет естественного способа представить это набором отдельных свойств, связывающих полет с каждым аэропортом. В некоторых случаях, порядок аргументов очень существенен.

В случаях, где едва ли один участник в отношении не имеет особой роли и по существу формирует упорядоченный список, естественно связать эти аргументы в последовательность, соответствующую некоторому отношению, и соотнести одного участника к этой последовательности (или первому элеменнту последовательности). Ниже мы показываем пример использования отношения упорядочения (`следующийСегмент`) между экземплярами класса `СегментПолета`. Каждый сегмент полета имеет свойство для назначения этого сегмента. Заметьте, что мы добавляем специальный подкласс сегмента полета, `ПоследнийСегментПолета`, с максимальной кардинальностью 0 для свойства `следующийСегмент`, чтобы показать конец последовательности.

![Пример графа экземпляров для сегментов полета](rusFigures/flight_e.jpg)

RDF обеспечивает словари списками — [словарь коллекций](http://www.w3.org/TR/2004/REC-rdf-primer-20040210/#collections), который может также использоваться в случаях, где группа аргументов для отношения не играет особой роли. Мы не используем RDF словарь коллекции в этом примере, потому что это менее удобно использовать групповое упорядочение отношения, когда мы представляем что-то более специфичное. В этом примере, мы представляем временный порядок между компонентами.

Мы можем представить онтологию для этого примера на OWL. Заметьте, что использование словаря `rdf:List` в OWL, подразумевает использование диалекта OWL Full для онтологии (смотри [соответствующую секцию](http://www.w3.org/TR/2004/REC-owl-features-20040210/#s1.3) [OWL руководства](#ref-owl-guide) для сравнения OWL Full и OWL DL). Следующая онтология на OWL Lite:

<img src="rusFigures/flight_c.jpg" alt="Пример графа классов для сегментов полета" width="528" height="178" />

    :Полет
        a owl:Class .

    :последовательность_полета
       a owl:ObjectProperty , owl:FunctionalProperty ;
       rdfs:domain :Полет ;
       rdfs:range :СегментПолета .

     :СегментПолета
        a owl:Class ;
        rdfs:subClassOf owl:Thing ;
        rdfs:subClassOf
             [ a owl:Restriction ;

        owl:cardinality "1";
                 owl:onProperty :место_назначения
             ] ;

           rdfs:subClassOf
             [ a owl:Restriction ;
                 owl:allValuesFrom :Аэропорт ;
                 owl:onProperty :место_назначения
              ] .

      :следующий_сегмент
          a owl:ObjectProperty , owl:FunctionalProperty ;
          rdfs:domain :СегментПолета
      ;
          rdfs:range :СегментПолета .


    :ПоследнийСегментПолета
       a owl:Class ;
       rdfs:comment "Последний сегмент полета не имеет следующий_сегмент";

          rdfs:subClassOf :СегментПолета ;
       rdfs:subClassOf
            [ a owl:Restriction ;
                owl:maxCardinality "0";
                owl:onProperty :следующий_сегмент
             ] .

      :Аэропорт
          a owl:Class .

      :место_назначения
          a owl:ObjectProperty , owl:FunctionalProperty ;
          rdfs:domain :СегментПолета .

#### RDFS код для этого примера

\[[RDFS](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/flight.rdf)\]

#### OWL код для этого примера

\[[N3](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/flight.n3)\] \[[RDF/XML](http://www.w3.org/TR/2006/NOTE-swbp-n-aryRelations-20060412/flight.owl)\]

---

## <span id="RDFReification"></span>N-мерные отношения и рейфикация в RDF

Может быть естественно понимать [RDF рейфикацию](http://www.w3.org/TR/2004/REC-rdf-primer-20040210/#reification) как представление n-мерных отношений. Мы не хотим использовать RDF словарь рейфикации, чтобы представить n-мерные отношения, в основном, по следующим причинам. Словарь RDF рейфикации разработан, чтобы говорить об _объявлениях_—концептов, которые являются экземплярами `rdf:Statement`. Объявление - это триплет объекта, предикаты, субъекта и рейфикация в RDF, используются чтобы поместить дополнительную информацию к этому триплету. Эта информация может включать исходник информации в триплете, например. В n-мерных отношениях, однако, дополнительные аргументы в отношении, не всегда характеризуют объявление, а скорее предоставляют дополнительную информацию о самом экземпляре отношения. Таким образом, это более естественно говорить о экземплярах отношения диагноза или покупки, чем об объявлении. Во всех вариантах использования, которые мы обсуждаем в заметке, необходимо говорить о экземплярах отношения, а не о объявлениях таких экземпляров.

---

## <span id="background">Дополнительные Предпосылки</span>

### <span id="Note">Замечание к словарю: Отношения и экземпляры Отношений, Свойства и экземпляры Свойств</span>

Мы обычно понимаем языки семантической сети, как состоящие из триплетов формы "Концепт1-Свойство-Концепт2" (традиционно, это было названо триплетом "объект-атрибут-значение", но мы не хотим использовать этот язык здесь, потому что это конфликтует с использованием RDF).

Однако, формально, мы интерпретируем свойства как отношение, то есть наборы упорядоченных пар концептов. Каждый экземпляр отношения - это просто один из этих упорядоченных пар. "Свойство" в каждом триплете качественно отличается от концептов в триплете. Это просто указывает, к какому отношению относится упорядоченная пара, состоящая из двух соответствующих концептов. Мы обычно говорим концепты; мы обычно не говорим упорядоченные пары.

### Неименованные экземпляры против именованных в этих шаблонах

Часто в случаях, как [вариант использования 1](#useCase1), мы хотим рассматривать два концепта отношения, в котором аргументы эквивалентны. Мы можем захватить эту интуицию (capture this intuition) с помощью использования [пустых узлов](http://esw.w3.org/mt/esw/archives/000034.html) RDF (то есть, `_:отношение_Диагноза`), чтобы представить экземпляры отношения. В [варианте использования 2](#useCase2), мы хотим рассмотреть вероятность того, что здесь могут быть две отдельные покупки с одинаковыми аргументами. В этом случае, узел должен быть назван, например `Покупка_1`.

---

### Замечания

1.  <span id="reifiedRelations"></span>"Рейфицированные отношения" играют важную роль или имеют специальный статус в ряде онтологий, например, смотри Sowa, J. Knowledge Representation. Morgan Kaufmann, 1999; Welty, C. and Guarino, N. Supporting ontological analysis of taxonomic relationships. Data and Knowledge Engineering, 39 (1). 51-74.
2.  <span id="refToOtherNotes"></span>Для простоты, мы представляем каждую болезнь как концепт. Это решение не всегда может быть подходящим, и мы обращаемся к читателю для (_написания_) различных замечаний. Аналогично, для простоты, в OWL мы представляем вероятность значений, как класс, который является списком из трех концептов (`ВЫСОКАЯ`, `СРЕДНЯЯ`, и `НИЗКАЯ`):

        :Значение_вероятности
              a       owl:Class ;
              owl:equivalentClass
                      [ a
                owl:Class ;
                        owl:oneOf (:ВЫСОКАЯ :СРЕДНЯЯ :НИЗКАЯ)
                      ] .

    Есть другие способы представить распределение значений. Пожалуйста обратитесь к замечаниям по Представлению Особых Значений в OWL \[[Особые Значения](#ref-specified-values)\]. В версии RDF Schema, мы представляем их просто, как строки, также для простоты.

3.  <span id="refToRdfValue"></span>RDF имеет свойство` rdf:value`, которое подходяще для примеров, таких как пример Диагноза здесь. Пока `rdf:value` не имеет собственного значения, RDF спецификация одобряет использование этого, как элемента словаря, чтобы идентифицировать "главный" компонент структурированного значения свойства. Поэтому, в нашем примере, мы сделали `значение_диагноза` подсвойством свойства `rdf:value`, вместо того, чтобы сделать это прямым экземпляром `rdf:Property`, чтобы указать, что `значение_диагноза` действительно является "главным" компонентом диагноза.
4.  <span id="purchaseName"></span>Заметьте, что здесь мы скорее используем именованные концепты для экземпляра класса `Покупка` (`Покупка_1`), чем неименованный пустой узел. В этом примере, может быть две отдельных покупки с точно такими же аргументами.
5.  <span id="refToUnits"></span>Для простоты, мы будем игнорировать факт того, что сумма выражена в $, и будем использовать простое число, как значение для свойства. Для обсуждения, как представлять единицы измерения и величины в OWL, пожалуйста, обращайтесь к различным замечаниям (_которые будут написаны_)

---

## <span id="References">Ссылки</span>

<span id="ref-specified-values">\[Specified Values\]</span>  
[Representing Specified Values in OWL: "value partitions" and "value sets"](http://www.w3.org/TR/swbp-specified-values/), Alan Rector, Editor, W3C Working Draft, 3 August 2004, http://www.w3.org/TR/swbp-specified-values/ .

<span id="ref-OWL-Overview">\[OWL Overview\]</span>  
[OWL Web Ontology Language Overview](http://www.w3.org/TR/2004/REC-owl-features-20040210/), Deborah L. McGuinness and Frank van Harmelen, Editors, W3C Recommendation, 10 February 2004, http://www.w3.org/TR/2004/REC-owl-features-20040210/ . [Latest version](http://www.w3.org/TR/owl-features/) available at http://www.w3.org/TR/owl-features/ .

<span id="ref-owl-guide">\[OWL Guide\]</span>  
[OWL Web Ontology Language Guide](http://www.w3.org/TR/2004/REC-owl-guide-20040210/), Michael K. Smith, Chris Welty, and Deborah L. McGuinness, Editors, W3C Recommendation, 10 February 2004, http://www.w3.org/TR/2004/REC-owl-guide-20040210/ . [Latest version](http://www.w3.org/TR/owl-guide/) available at http://www.w3.org/TR/owl-guide/ .

<span id="ref-owl-abstract-syntax">\[OWL Semantics and Abstract Syntax\]</span>  
[OWL Web Ontology Language Semantics and Abstract Syntax](http://www.w3.org/TR/2004/REC-owl-semantics-20040210/), Peter F. Patel-Schneider, Patrick Hayes, and Ian Horrocks, Editors, W3C Recommendation, 10 February 2004, http://www.w3.org/TR/2004/REC-owl-semantics-20040210/ . [Latest version](http://www.w3.org/TR/owl-semantics/) available at http://www.w3.org/TR/owl-semantics/ .

<span id="ref-rdf-primer">\[RDF Primer\]</span>  
[RDF Primer](http://www.w3.org/TR/2004/REC-rdf-primer-20040210/), Frank Manola and Eric Miller, Editors, W3C Recommendation, 10 February 2004, http://www.w3.org/TR/2004/REC-rdf-primer-20040210/ . [Latest version](http://www.w3.org/TR/rdf-primer/) available at http://www.w3.org/TR/rdf-primer/ .

<span id="ref-RDF-Semantics">\[RDF Semantics\]</span>  
[RDF Semantics](http://www.w3.org/TR/2004/REC-rdf-mt-20040210/), Pat Hayes, Editor, W3C Recommendation, 10 February 2004, http://www.w3.org/TR/2004/REC-rdf-mt-20040210/ . [Latest version](http://www.w3.org/TR/rdf-mt/) available at http://www.w3.org/TR/rdf-mt/ .

<span id="ref-rdf-vocabulary">\[RDF Vocabulary\]</span>  
[RDF Vocabulary Description Language 1.0: RDF Schema](http://www.w3.org/TR/2004/REC-rdf-schema-20040210/), Dan Brickley and R. V. Guha, Editors, W3C Recommendation, 10 February 2004, http://www.w3.org/TR/2004/REC-rdf-schema-20040210/ . [Latest version](http://www.w3.org/TR/rdf-schema/) available at http://www.w3.org/TR/rdf-schema/ .

<span id="turtle">\[Turtle\]</span>  
"[Turtle - Terse RDF Triple Language](http://www.w3.org/2001/sw/DataAccess/df1/), Dave Beckett.

---

## <span id="Changes">Изменения</span>

- Соединены шаблоны 1 и 2 в один шаблон с разными вариантами использования. Те же варианты использования остаются, но они описываются, как различные варианты использования для одного шаблона.
- Удалено рассмотрение моментов обсуждения логической эквивалентности шаблонов 1 и 2 (так как теперь они являются одним шаблоном).
- Добавлено больше обсуждения Основных Проблем и Вариантов Использования
- Добавлен [шаблон 2](#pattern2) (использование rdf:Lists)
- Добавлен пример полета
- Изменена формулировка "Представление Шаблонов"
- Используются пустые узлы для экземпляров отношения в [шаблоне 1](#pattern1) и [шаблоне 2](#pattern2)
- Добавлена секция [N-мерные отношения и рейфикация в RDF](#RDFReification)
- Добавлена секция [Дополнительные Предпосылки](#background)
- Добавлены ссылки
- Изменены некоторые соотношения "отношение" с "экземпляр отношения"
- Удалены примеры в абстрактном синтаксисе
- Добавлены [Благодарности](#acknowledgements)

---

## <span id="acknowledgements"></span>Благодарности

Авторы хотели бы поблагодарить следующих членов Рабочей Группы за их участие в этом документе: Pat Hayes, Jeremy Carroll, Chris Welty, Michael Uschold, Bernard Vatant. Frank Manola, Ivan Herman, Jamie Lawrence также поучаствовали в работе на документом.

Этот документ - продукт Специальной Комиссии Разработки Онтологий и Шаблонов Рабочей Группы Лучшей Практики и Развертывания Семантической Сети.

---

[<img src="rusFigures/valid-ht.png" alt="Valid HTML 4.01!" width="88" height="31" />](http://validator.w3.org/check?uri=referer) [![Valid CSS!](rusFigures/vcss0000.gif)](http://jigsaw.w3.org/css-validator/)
